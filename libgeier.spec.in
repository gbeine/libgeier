# libgeier spec file, used to drive rpmbuild.
# Spec File Version $Id: libgeier.spec.in,v 1.4 2005-07-16 17:51:25 stesie Exp $

#
# Define vendor and version
#
%if "%{_vendor}" == "suse" || "%{_vendor}" == "pc"
%define VENDOR SuSE
%define VENDOR_VERS %{suse_version}
%else
%define VENDOR %{_vendor}
%define VENDOR_VERS
%define suse_version 0
%endif

#
# Defaults for directories
#
%define _prefix			@prefix@

#
# Set SuSE specific directories
#

Summary:	@PACKAGE@ - Open Source Implementierung der ELSTER Schnittstelle. 
Name:           @PACKAGE@
Version:        @VERSION@
Release:	1.%{VENDOR}%{VENDOR_VERS}
Distribution:	%{VENDOR} %{VENDOR_VERS}
URL:		http://www.taxbird.de/
Source0:	%{name}-%{version}.tar.gz
License:	GPL
Group:		Applications/Finance
Vendor:		Juergen Stuber <juergen@jstuber.net>, Stefan Siegl <stesie@brokenpipe.de>
Packager:	Stefan Siegl <stesie@brokenpipe.de>
BuildRoot:	%{_tmppath}/%{name}-%(id -un)

#
# Include dependencies manually
#
##AutoReq: 0

BuildRequires: openssl-devel >= 0.9.6
BuildRequires: libxml2-devel libxslt-devel
BuildRequires: zlib-devel
Requires:      openssl       >= 0.9.6
Requires:      libxml2 libxslt
Requires:      zlib

#
# Description
#
%description
libgeier ist eine in C geschriebene Bibliothek, zur Validierung von
Elster-Daten, zur Datenübertragung sowie Aufbereitung mittels der von der
Finanzverwaltung überlassenen XSLT-Stylesheets.
Diese Software ist zur Zeit im ALPHA Stadium!

#
# Prepare to build
#
%prep
%setup -q


#
# configure & build section
#
%build

# configure libgeier
%configure

# compile libgeier
%__make

#
# Installation section
#
%install
[ %{buildroot} != "/" ] && rm -rf %{buildroot}

%__make install-strip DESTDIR=%{buildroot}

#
# Clean section
#
%clean
[ %{buildroot} != "/" ] && rm -rf %{buildroot}

#
# Post install section
#
%post

#
# Pre uninstall section
#
%preun

#
# Post uninstall section
#
%postun


#
# Files section
#
%files
%defattr(-,root,root)
%{_libdir}/*
%{_libdir}/pkgconfig/libgeier.pc
%{_bindir}/*
%{_includedir}/*
%{_datadir}/%{name}/*

%changelog

* Tue Jun 21 2005 Stefan Siegl <stesie@brokenpipe.de> - 0.2
- Dependency changes for libgeier release 0.2
- changed wrong vendor entry
- don't call autogen.sh on rpmbuild
* Thu Feb 23 2005 Jan Zimmerschied <jan@zimmerschied.de> - 0.1
- Initial version.
